<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create a New Post</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container mt-5">
      <div class="row">
        <div class="col-md-6 offset-md-3">
          <h1 class="text-center">Create a New Post</h1>
          <p class="text-center">
            Fill out the form below to create a new post.
          </p>

          <form action="/create" method="POST" class="mt-4">
            <div class="mb-3">
              <label for="title" class="form-label">Title</label>
              <input
                type="text"
                name="title"
                id="title"
                class="form-control"
                value="Title"
                required
              />
            </div>

            <div class="mb-3">
              <label for="status" class="form-label">Status</label>
              <select name="status" id="status" class="form-control" required>
                <option value="Draft">Draft</option>
                <option value="Review">Review</option>
                <option value="Published">Published</option>
              </select>
            </div>

            <div class="mb-3">
              <label for="Description" class="form-label">Description</label>
              <textarea
                name="description"
                id="description"
                rows="4"
                class="form-control"
                required
              >Description</textarea>
            </div>

            <div class="mb-3">
              <label for="essay" class="form-label">Essay</label>
              <textarea
                name="essay"
                id="essay"
                rows="6"
                class="form-control"
                required
              >Essay</textarea>
            </div>

            
            <div class="mb-3">
              <label for="links" class="form-label">Interesting Stuff</label>
              
              <div id="linksContainer">
                <!-- Dynamic link fields will be inserted here -->
              </div>
            <button type="button" class="btn btn-primary" onclick="addLinkFields()">Add Link</button><br><br>
            </div>

            <!-- END OF TOP Interesting Stuff aka Links  -->
            <div class="mb-3">
              <label for="personal" class="form-label">What I'm up to</label>
              <textarea
                name="personal"
                id="personal"
                rows="6"
                class="form-control"              
                required
              >Personal</textarea>
            </div>

            <div class="mb-3">
              <label for="socialmedia" class="form-label">Xcellent Posts & NOSTR Notes</label>
              <textarea
                name="socialmedia"
                id="socialmedia"
                rows="6"
                class="form-control"
                required
              >Social Media</textarea>
            </div>

            <div class="mb-3">
              <label for="promo" class="form-label">What Iâ€™m Promoting:</label>
              <textarea
                name="promo"
                id="promo"
                rows="6"
                class="form-control"
                required
              >Promo</textarea>
            </div>

            <div class="mb-3">
              <label for="author" class="form-label">Author:</label>
              <input
                type="text"
                name="author"
                id="author"
                class="form-control"
                value="HODL T. WASHINGTON"
                required
              />
            </div>

            <button type="submit" class="btn btn-primary">Create Post</button>
          </form>

          <p class="text-center mt-3">
            <a href="/" class="btn btn-secondary">Go Back to Home</a>
          </p>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    
    <script>
       let linkIndex = 0; // To uniquely identify each link field set
        console.log('Link Index:', linkIndex);

        function addLinkFields() {
            const container = document.getElementById('linksContainer');

            const linkGroup = document.createElement('div');
            linkGroup.className = 'link-group';
            linkGroup.id = `link-group-${linkIndex}`;

            linkGroup.innerHTML = `
                <label for="linktitle-${linkIndex}">Link Title:</label>
                <input type="text" id="linktitle-${linkIndex}" name="links[${linkIndex}][linkTitle]"><br>

                <label for="linkurl-${linkIndex}">Link URL:</label>
                <input type="text" id="linkurl-${linkIndex}" name="links[${linkIndex}][linkUrl]"><br>

                <label for="commentary-${linkIndex}">Commentary:</label>
                <input type="text" id="commentary-${linkIndex}" name="links[${linkIndex}][commentary]"><br>

                <button type="button" class="btn btn-secondary" onclick="removeLinkFields('link-group-${linkIndex}')">Remove Link</button>
            `;

            container.appendChild(linkGroup);
            linkIndex++; // Increment index to ensure unique names for each set
        }

        function removeLinkFields(linkGroupId) {
            const linkGroup = document.getElementById(linkGroupId);
            linkGroup.remove();
        }
  </script>


  </body>
</html>